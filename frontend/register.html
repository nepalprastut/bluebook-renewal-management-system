<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bluebook Renewal System - Register</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body class="login-body">

  <div class="login-card">
    <h1>Owner Registration</h1>
    <p class="subtitle">Create a new vehicle owner account</p>

    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <input id="full_name" placeholder="Full Name">
    <input id="citizenship_no" placeholder="Citizenship No">
    <input id="district" placeholder="District">
    <input id="mobile_no" placeholder="Mobile No">

    <button onclick="register()">Register</button>
    
    <p class="auth-link">Already have an account? <a href="login.html">Login here</a></p>
    
    <p id="msg"></p>
  </div>

<script>
async function register() {
  const msg = document.getElementById("msg");
  
  try {
    const res = await fetch("http://localhost:3000/api/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        username: username.value,
        password: password.value,
        full_name: full_name.value,
        citizenship_no: citizenship_no.value,
        district: district.value,
        mobile_no: mobile_no.value
      })
    });

    const data = await res.json();

    if (res.ok) {
      msg.innerText = "Registration successful! Redirecting to login...";
      msg.style.color = "green";
      
      // Redirect to login after 2 seconds
      setTimeout(() => {
        window.location.href = "login.html";
      }, 2000);
    } else {
      msg.innerText = data.error || "Registration failed";
      msg.style.color = "red";
    }
  } catch (err) {
    msg.innerText = "Server error. Please try again.";
    msg.style.color = "red";
  }
}
</script>

</body>
</html>